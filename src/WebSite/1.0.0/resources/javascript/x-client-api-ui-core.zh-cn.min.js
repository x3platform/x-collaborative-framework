// -*- ecoding=utf-8 -*-
// Name		:x-client-api 
// Version	:1.0.0 
// Author	:ruanyu@live.com 
// Date		:2015-06-10
x.ui.animation={newClip:function(a){var b={container:null,slider:null,scenes:[],count:0,timer:null,index:0,_target:0,_t:0,_b:0,_c:0,bindOptions:function(a){this.options={vertical:!0,hange:0,duration:50,time:5,auto:!1,cpause:2e3,onStart:function(){},onFinish:function(){},tween:x.ui.animation.tween.quart.easeOut},x.ext(this.options,a||{})},run:function(a){void 0==a&&(a=this.index),0>a&&(a=this.count-1)||a>=this.count&&(a=0),this.target=-Math.abs(this.change)*(this.index=a),this._t=0,this._b=parseInt(x.css.style(this.slider)[this.options.vertical?"top":"left"]),this._c=this.target-this._b,this.onStart(),this.move()},move:function(){clearTimeout(this.timer),this._c&&this._t<this.duration?(this.moveTo(Math.round(this.tween(this._t++,this._b,this._c,this.duration))),this.timer=setTimeout(x.invoke(this,this.move),this.time)):(this.moveTo(this.target),this.auto&&(this.timer=setTimeout(x.invoke(this,this.next),this.pause)))},moveTo:function(a){this.slider.style[this._css]=a+"px"},previous:function(){this.run(--this.index)},next:function(){this.run(++this.index)},stop:function(){clearTimeout(this.timer),this.moveTo(this.target)},bindScenes:function(){var a=this;$($(this.container).find(".x-ui-clip-scene")).each(function(b,c){a.scenes[b]=c}),this.count=this.scenes.length},getScene:function(a){var b=this.scenes.length;return a=x.isUndefined(a,0),0>a&&(a=0),a>b-1&&(a=b-1),this.scenes[a]},addScene:function(a){var b=this.scenes.length;0==b&&x.debug.error("必须创建默认场景。"),a=x.isUndefined(a,b-1);var c=this.getScene(a);$(c).parent().parent().append($('<td><div class="x-ui-clip-scene" ></div></td>')),this.count++,$(this.container).find(".x-ui-clip-scene").css({width:this.width,height:this.height}),this.bindScenes()},removeScene:function(a){var b=this.scenes.length;0==b&&x.debug.error("必须创建默认场景。"),2==scenes.size()&&x.debug.error("必须创建默认场景."),a=x.isUndefined(a,b-1);this.getScene(a);scenes.size()>0&&($(scenes[scenes.size()-1]).parent().parent().append($('<td><div class="x-ui-clip-scene" ></div></td>')),this.count++),$(this.container).find(".x-ui-clip-scene").css({width:this.width,height:this.height}),this.bindScenes()},create:function(a){this.container=x.dom.query(a.container)[0],this.slider=x.dom.query(a.slider)[0],this.width=a.width,this.height=a.height,this.bindOptions(a),$(this.container).find(".x-ui-clip-scene").css({width:this.width,height:this.height}),this.bindScenes(),this.count=Math.abs(a.count),this.auto=!!this.options.auto,this.duration=Math.abs(this.options.duration),this.time=Math.abs(this.options.time),this.pause=Math.abs(this.options.pause),this.tween=this.options.tween,this.onStart=this.options.onStart,this.onFinish=this.options.onFinish;var b=!!this.options.vertical;this._css=b?"top":"left";var c=x.css.style(this.container).position;"relative"==c||"absolute"==c||(this.container.style.position="relative"),this.container.style.overflow="hidden",this.slider.style.position="absolute",this.change=this.options.change?this.options.change:this.slider[b?"offsetHeight":"offsetWidth"]/this.count}};return b.create(a),b},tween:{linear:function(a,b,c,d){return c*a/d+b},quart:{easeIn:function(a,b,c,d){return c*(a/=d)*a*a*a+b},easeOut:function(a,b,c,d){return-c*((a=a/d-1)*a*a*a-1)+b},easeInOut:function(a,b,c,d){return(a/=d/2)<1?c/2*a*a*a*a+b:-c/2*((a-=2)*a*a*a-2)+b}},quad:{easeIn:function(a,b,c,d){return c*(a/=d)*a+b},easeOut:function(a,b,c,d){return-c*(a/=d)*(a-2)+b},easeInOut:function(a,b,c,d){return(a/=d/2)<1?c/2*a*a+b:-c/2*(--a*(a-2)-1)+b}},cubic:{easeIn:function(a,b,c,d){return c*(a/=d)*a*a+b},easeOut:function(a,b,c,d){return c*((a=a/d-1)*a*a+1)+b},easeInOut:function(a,b,c,d){return(a/=d/2)<1?c/2*a*a*a+b:c/2*((a-=2)*a*a+2)+b}},quint:{easeIn:function(a,b,c,d){return c*(a/=d)*a*a*a*a+b},easeOut:function(a,b,c,d){return c*((a=a/d-1)*a*a*a*a+1)+b},easeInOut:function(a,b,c,d){return(a/=d/2)<1?c/2*a*a*a*a*a+b:c/2*((a-=2)*a*a*a*a+2)+b}},sine:{easeIn:function(a,b,c,d){return-c*Math.cos(a/d*(Math.PI/2))+c+b},easeOut:function(a,b,c,d){return c*Math.sin(a/d*(Math.PI/2))+b},easeInOut:function(a,b,c,d){return-c/2*(Math.cos(Math.PI*a/d)-1)+b}},expo:{easeIn:function(a,b,c,d){return 0==a?b:c*Math.pow(2,10*(a/d-1))+b},easeOut:function(a,b,c,d){return a==d?b+c:c*(-Math.pow(2,-10*a/d)+1)+b},easeInOut:function(a,b,c,d){return 0==a?b:a==d?b+c:(a/=d/2)<1?c/2*Math.pow(2,10*(a-1))+b:c/2*(-Math.pow(2,-10*--a)+2)+b}},circ:{easeIn:function(a,b,c,d){return-c*(Math.sqrt(1-(a/=d)*a)-1)+b},easeOut:function(a,b,c,d){return c*Math.sqrt(1-(a=a/d-1)*a)+b},easeInOut:function(a,b,c,d){return(a/=d/2)<1?-c/2*(Math.sqrt(1-a*a)-1)+b:c/2*(Math.sqrt(1-(a-=2)*a)+1)+b}},elastic:{easeIn:function(a,b,c,d,e,f){if(0==a)return b;if(1==(a/=d))return b+c;if(f||(f=.3*d),!e||e<Math.abs(c)){e=c;var g=f/4}else var g=f/(2*Math.PI)*Math.asin(c/e);return-(e*Math.pow(2,10*(a-=1))*Math.sin(2*(a*d-g)*Math.PI/f))+b},easeOut:function(a,b,c,d,e,f){if(0==a)return b;if(1==(a/=d))return b+c;if(f||(f=.3*d),!e||e<Math.abs(c)){e=c;var g=f/4}else var g=f/(2*Math.PI)*Math.asin(c/e);return e*Math.pow(2,-10*a)*Math.sin(2*(a*d-g)*Math.PI/f)+c+b},easeInOut:function(a,b,c,d,e,f){if(0==a)return b;if(2==(a/=d/2))return b+c;if(f||(f=.3*d*1.5),!e||e<Math.abs(c)){e=c;var g=f/4}else var g=f/(2*Math.PI)*Math.asin(c/e);return 1>a?-.5*e*Math.pow(2,10*(a-=1))*Math.sin(2*(a*d-g)*Math.PI/f)+b:e*Math.pow(2,-10*(a-=1))*Math.sin(2*(a*d-g)*Math.PI/f)*.5+c+b}},back:{easeIn:function(a,b,c,d,e){return void 0==e&&(e=1.70158),c*(a/=d)*a*((e+1)*a-e)+b},easeOut:function(a,b,c,d,e){return void 0==e&&(e=1.70158),c*((a=a/d-1)*a*((e+1)*a+e)+1)+b},easeInOut:function(a,b,c,d,e){return void 0==e&&(e=1.70158),(a/=d/2)<1?c/2*a*a*(((e*=1.525)+1)*a-e)+b:c/2*((a-=2)*a*(((e*=1.525)+1)*a+e)+2)+b}},bounce:{easeIn:function(a,b,c,d){return c-x.animation.tween.bounce.easeOut(d-a,0,c,d)+b},easeOut:function(a,b,c,d){return(a/=d)<1/2.75?7.5625*c*a*a+b:2/2.75>a?c*(7.5625*(a-=1.5/2.75)*a+.75)+b:2.5/2.75>a?c*(7.5625*(a-=2.25/2.75)*a+.9375)+b:c*(7.5625*(a-=2.625/2.75)*a+.984375)+b},easeInOut:function(a,b,c,d){return d/2>a?.5*x.animation.tween.bounce.easeIn(2*a,0,c,d)+b:.5*x.animation.tween.bounce.easeOut(2*a-d,0,c,d)+.5*c+b}}}},x.ui.drag={getDraggableWindow:function(a){var b=x.getFriendlyName(location.pathname+"$"+a.targetWindowName+"$draggable"),c={name:b,options:a,targetWindow:null,targetWindowWidth:0,targetWindowHeight:0,mask:"dragListenerMask",isDragging:!1,pointX:"",pointY:"",currentX:"",currentY:"",draggingClassName:"alpha",stopClassName:"",load:function(){if(void 0===document.getElementById(this.options.targetWindowName))return void alert("元素【"+this.options.targetWindowName+"】未找到。");this.targetWindowName=this.options.targetWindowName,this.options.draggingClassName&&(this.draggingClassName=this.options.draggingClassName),this.targetWindow=document.getElementById(this.targetWindowName),this.stopClassName=this.targetWindow.className,"undefined"==typeof this.options.targetWindowWidth?(this.targetWindowWidth=$(this.targetWindow).width(),this.targetWindowWidth+=Number($(this.targetWindow).css("padding-left").replace("px","")),this.targetWindowWidth+=Number($(this.targetWindow).css("padding-right").replace("px",""))):this.targetWindowWidth=this.options.targetWindowWidth,"undefined"==typeof this.options.targetWindowHeight?(this.targetWindowHeight=$(this.targetWindow).height(),this.targetWindowHeight+=Number($(this.targetWindow).css("padding-top").replace("px","")),this.targetWindowHeight+=Number($(this.targetWindow).css("padding-bottom").replace("px",""))):this.targetWindowHeight=this.options.targetWindowHeight,"undefined"!=typeof this.options.pointX&&(this.targetWindow.style.top=this.options.pointX+"px"),"undefined"!=typeof this.options.pointY&&(this.targetWindow.style.left=this.options.pointY+"px");var a=this;$(document.body).bind("mousemove",function(b){if(b=null===b?window.event:b,!a.isDragging)return!0;"default"!==a.options.draggingStyle&&(a.targetWindow.className=a.draggingClassName),a.targetWindow.style.left=b.clientX-a.pointX+"px",a.targetWindow.style.top=b.clientY-a.pointY+"px",a.currentX=a.targetWindow.offsetLeft,a.currentY=a.targetWindow.offsetTop,a.currentX<0&&(a.targetWindow.style.left="0px"),a.currentY<0&&(a.targetWindow.style.top="0px");var c=x.page.getRange();a.currentX+a.targetWindowWidth>c.width-22&&(a.targetWindow.style.left=c.width-a.targetWindowWidth-22+"px"),a.currentY+a.targetWindowHeight>c.height&&(a.targetWindow.style.top=c.height-a.targetWindowHeight+"px"),x.debug.log("document.body.scrollHeight:"+document.body.scrollHeight+" | self.targetWindow.offsetTop:"+a.targetWindow.offsetTop+" | range.width:"+c.width+" | range.height:"+c.height+" | targetWindowWidth:"+a.targetWindowWidth+" | targetWindowHeight:"+a.targetWindowHeight+" | left:"+a.currentX+" | top:"+a.currentY+" | right:"+(c.width-(a.currentX+a.targetWindowWidth))+" | bottom:"+(a.currentY+a.targetWindowHeight));var d=a.targetWindow,e=document.getElementById(a.mask);d.style.display="block",e&&(e.style.width=d.offsetWidth,e.style.height=d.offsetHeight,e.style.top=d.style.top,e.style.left=d.style.left,e.style.zIndex=d.style.zIndex-1,e.style.position="absolute",e.style.display="block",e.className="transparent")}),$(document.body).bind("mouseup",function(){if(a.targetWindow.releaseCapture?a.targetWindow.releaseCapture():window.releaseEvents&&window.releaseEvents(Event.MOUSEMOVE|Event.MOUSEUP),a.isDragging){var b=document.getElementById(a.mask);b&&(b.style.display="hidden")}return a.isDragging=!1,!1}),$(this.targetWindow).bind("mousedown",function(b){b=null===b?window.event:b,b.target.id===a.targetWindow.id&&(a.targetWindow.setCapture?a.targetWindow.setCapture():window.captureEvents&&window.captureEvents(Event.MOUSEMOVE|Event.MOUSEUP),2!=b.button&&(a.targetWindow.style.zIndex=99,a.pointX=b.clientX-a.targetWindow.offsetLeft,a.pointY=b.clientY-a.targetWindow.offsetTop,a.isDragging=!0))}),$(this.targetWindow).bind("mouseup",function(){return a.targetWindow.releaseCapture?(a.targetWindow.releaseCapture(),a.targetWindow.className=a.stopClassName):window.releaseEvents&&(window.releaseEvents(Event.MOUSEMOVE|Event.MOUSEUP),a.targetWindow.className=a.stopClassName),a.isDragging=!1,!1})}};return c.load(),c}},x.ui.form={bindInputData:function(a){var b=x.dom.query(a.inputName);if("[contacts],[corporation],[project]".indexOf(a.featureName)>-1){var c=b.attr("x-data");if("undefined"!=typeof c&&c.indexOf("#")>-1){for(var d="",e="",f=x.string.trim(c,",").split(","),g=0;g<f.length&&(d+=f[g].split("#")[1]+",",e+=f[g].split("#")[2]+";",0!==a.multiSelection);g++);d=x.string.rtrim(d,","),e=x.string.rtrim(e,";"),b.val(1===a.multiSelection?c:d),b.attr("selectedText",e)}}},checkDataStorage:function(){var a=x.ext({tooltip:0,alert:1},arguments[0]||{}),b="",c=x.dom("*");return x.each(c,function(c,d){try{(x.dom(d).attr("custom-forms-data-required")||x.dom(d).attr("custom-forms-data-regexp"))&&(b+=x.ui.form.checkDataInput(d,a.tooltip))}catch(e){x.debug.error(e)}}),""===b?!1:(alert(b),!0)},checkDataInput:function(a,b){if("undefined"==typeof a.id||""===a.id)return"";var c="";if(1==b&&x.tooltip.newWarnTooltip({element:a.id,hide:1}),$(a).hasClass("custom-forms-data-required")&&""===$(a).val().trim()){var d=$(a).attr("dataVerifyWarning");d&&(1==b&&x.tooltip.newWarnTooltip({element:a.id,message:d,hide:0}),c+=d+"\n")}if($(a).hasClass("custom-forms-data-regexp")&&""!==$(a).val().trim()&&!x.expressions.exists({text:$(a).val(),ignoreCase:$(a).attr("dataIgnoreCase"),regexpName:$(a).attr("dataRegExpName"),regexp:$(a).attr("dataRegExp")})){var e=$(a).attr("dataRegExpWarning");e&&(1==b&&x.tooltip.newWarnTooltip({element:a.id,message:e,hide:0}),c+=e+"\n")}return c},getDataStorage:function(a){return a=x.ext({storageType:"JSON"},a||{}),a.storageType=a.storageType.toUpperCase(),"JSON"===a.storageType?x.ui.form.getJsonDataStorage(a):x.ui.form.getXmlDataStorage(a)},getJsonDataStorage:function(a){var b="";x.isUndefined(a.includeajaxStorageNode)&&(a.includeajaxStorageNode="JSON"===a.storageType?!0:!1),a.includeajaxStorageNode&&(b="{ajaxStorage:{");var c=x.dom("*");return x.each(c,function(a,c){try{if("undefined"==typeof c.id||""===c.id)return;var d=x.dom(c).attr("dataType");if(null!==d&&"undefined"!=typeof d)switch(d){case"value":b+='"'+c.id+'":"'+x.toSafeJSON($(c).val().trim())+'",';break;case"html":b+='"'+c.id+'":"'+x.toSafeJSON($(c).html().trim())+'",';break;case"checkbox":if(b+='"'+c.id+'":[',0===$(document.getElementsByName(c.id)).size()){b+="],";break}var e=c.id;$(document.getElementsByName(c.id)).each(function(a,c){e===c.name&&"checkbox"===c.type.toLowerCase()&&(b+='{"text":"'+$(c).attr("text")+'", "value":"'+x.toSafeJSON($(c).val())+'", "checked":'+c.checked+"},")}),","===b.substr(b.length-1,1)&&(b=b.substr(0,b.length-1)),b+="],";break;case"list":if(b+='"'+c.id+'":[',0===$(this).find(".list-item").size()){b+="],";break}$(this).find(".list-item").each(function(){b+="[",$(this).find(".list-item-colum").each(function(a,c){b+=$(c).hasClass("data-type-html")?'"'+x.toSafeJSON($(c).html().trim())+'",':'"'+x.toSafeJSON($(c).val().trim())+'",'}),","===b.substr(b.length-1,1)&&(b=b.substr(0,b.length-1)),b+="],"}),","===b.substr(b.length-1,1)&&(b=b.substr(0,b.length-1)),b+="],";break;case"table":b+='"'+c.id+'":[',$("#"+c.id).find("tr").each(function(){0!==$(this).find(".table-td-item").size()&&(b+="[",$(this).find(".table-td-item").each(function(a,c){b+=$(c).hasClass("data-type-html")?'"'+x.toSafeJSON($(c).html().trim())+'",':'"'+x.toSafeJSON($(c).val().trim())+'",'}),","===b.substr(b.length-1,1)&&(b=b.substr(0,b.length-1)),b+="],")}),","===b.substr(b.length-1,1)&&(b=b.substr(0,b.length-1)),b+="],"}}catch(f){x.debug.error(f)}}),","===b.substr(b.length-1,1)&&(b=b.substr(0,b.length-1)),a.includeajaxStorageNode&&(b+="}}"),b},getXmlDataStorage:function(a){var b="";"undefined"==typeof a&&(a={includeajaxStorageNode:!1}),a.includeajaxStorageNode&&(outString='<?xml version="1.0" encoding="utf-8" ?>',outString+="<ajaxStorage>");var c=x.dom("*");return x.each(c,function(a,c){try{if("undefined"==typeof c.id||""===c.id)return;var d=$(c).attr("dataType");if(null!==d&&"undefined"!=typeof d)switch(d){case"value":b+="<"+c.id+"><![CDATA["+$(c).val().trim()+"]]></"+c.id+">";break;case"html":b+="<"+c.id+"><![CDATA["+$(c).html().trim()+"]]></"+c.id+">";break;case"select":b+=-1!==$(c).get(0).selectedIndex?"<"+c.id+"><![CDATA["+x.toSafeJSON($(c).get(0)[$(c).get(0).selectedIndex].value.trim())+"]]></"+c.id+">":"<"+c.id+"></"+c.id+">";break;case"checkbox":for(var e=document.getElementsByName("check"+c.id),f="",g=0;g<e.length;g++)e[g].checked&&(f+=e[g].value+";");if(""!==f)f=f.substring(0,f.length-1),b+="<"+c.id+"><![CDATA["+f+"]]></"+c.id+">";else{var h=$(c).attr("notSelectedDefaultValue");b+=void 0==h?"<"+c.id+"><![CDATA[]]></"+c.id+">":"<"+c.id+"><![CDATA["+h+"]]></"+c.id+">"}}}catch(i){x.debug.error(i)}}),a.includeajaxStorageNode&&(b+="</ajaxStorage>"),b}},x.ui.mask={zIndex:800,stack:null,getMaskStack:function(){return null===x.ui.mask.stack&&(x.ui.mask.stack=x.newStack()),x.ui.mask.stack},defaultInstance:null,getWindow:function(a,b){if(x.isUndefined(b))if(null===this.defaultInstance){var c=x.getFriendlyName(location.pathname+"-mask-default-instance");this.defaultInstance=b=x.ui.mask.newMaskWrapper(c,a)}else b=this.defaultInstance;return b.open().innerHTML=a.content,b.resize(),x.call(a.callback),b},clear:function(){var a=x.ui.mask.getMaskStack().peek();null!==a&&a.close()},newMaskWrapper:function(a,b){b=b||{};var c={name:"maskWrapper",popupWindowName:"maskPopupWindow",options:null,maxOpacity:.4,maxDuration:.2,autoHide:1,create:function(a,b){this.options=x.ext({height:"100%",width:"100%",left:"0",top:"0"},b||{}),this.name=a,this.popupWindowName=a+"-maskPopupWindow",this.options.url&&(this.options.content='<div ><iframe border="0" frameborder="0" marginheight="0" marginwidth="0" border="0" scrolling="no" style="border:none; width:'+this.options.width+"; height:"+this.options.height+';" src="'+this.options.url+'"></iframe></div>')},show:function(){var a=document.getElementById(this.name);null===a&&($(document.body).append('<div id="'+this.name+'" style="display:none;" ></div>'),a=document.getElementById(this.name)),1===this.autoHide&&$(a).bind("click",function(a){$(this).unbind("click"),x.event.stopPropagation(a);var b=window[this.id];""===x.dom.query(b.name).css("display")&&b.close()}),$(a).css({position:"fixed",top:0,left:0,"z-index":90,width:"100%",height:"100%",background:"rgba(0,0,0,100)"}),"none"===a.style.display&&(x.dom.query(this.name).css({display:"",opacity:.1}),x.dom.query(this.popupWindowName).css({display:"none"}),x.dom.query(this.name).fadeTo(1e3*this.maxDuration,this.maxOpacity,function(){var a=window[this.id];x.dom.query(a.popupWindowName).css({display:""}),x.dom.query(a.popupWindowName).slideDown("slow")}))},hide:function(){if("none"!==x.dom.query(this.popupWindowName).css("display")){var a=this;x.dom.query(this.popupWindowName).fadeOut("normal",function(){x.dom.query(a.name).css({display:"",opacity:a.maxOpacity}),x.dom.query(a.name).fadeOut(1e3*a.maxDuration,function(){x.dom.query(a.name).css({display:"none"})})})}},open:function(){var a=x.ui.mask.getMaskStack().peek();null!==a&&a.name!==this.name&&a.hide(),(null===a||a.name!==this.name)&&x.ui.mask.getMaskStack().push(this),this.show();var b=document.getElementById(this.popupWindowName),c=this.options.left,d=this.options.top;return null===b?(b=document.createElement("div"),b.id=this.popupWindowName,b.style.width=this.options.width,b.style.height=this.options.height,b.style.display="none",b.style.zIndex=x.ui.mask.zIndex++,$(document.body).append(b),$(b).fadeIn("normal"),c=(x.page.getRange().width-$(b).width())/2,x.dom.fixed("#"+this.popupWindowName,c,d)):(b.style.zIndex=x.ui.mask.zIndex++,$(b).fadeIn("normal"),c=(x.page.getRange().width-$(b).width())/2,x.dom.fixed("#"+this.popupWindowName,c,d)),this.resize(),b},resize:function(){var a=x.dom.query(this.popupWindowName);if(0!==a.size()){var c=this.options.left,d=this.options.top,e=720;if(0!==a.children().length){var e=a.width();a.css({width:e+"px"}),c=(x.page.getRange().width-e)/2,x.dom.fixed("#"+this.popupWindowName,c,d),x.ui.drag.getDraggableWindow({targetWindowName:b.draggableWindowName||this.popupWindowName,targetWindowWidth:b.draggableWidth,targetWindowHeight:b.draggableHeight,draggingStyle:"default"})}}},closeEvent:null,close:function(){x.ui.mask.getMaskStack().pop(),this.hide();var a=x.ui.mask.getMaskStack().peek();null!==a&&a.show(),this.closeEvent&&this.closeEvent()}};return c.create(a,b),window[a]=c,c}},x.ui.tooltip={newTooltip:function(a){a=x.ext({following:1,maxOpacity:.85,maxDuration:.2,defaultCss:!0,corner:!1,fontSize:"12px",deltaX:5,deltaY:5,zIndex:80},a||{});var b={create:function(){this.element=x.dom.query(a.element),"undefined"!=typeof a.tooltip||("undefined"==typeof a.tooltip&&"undefined"!=typeof this.element.attr("tooltip")?(a.message=this.element.attr("tooltip"),a.tooltip=this.element[0].id+"$tooltip",0===x.dom.query(a.tooltip).size()&&this.element.after('<div id="'+a.tooltip+'" class="ajax-tooltip" style="display:none;" ><span>'+a.message.replace(/\n/g,"<br />")+'</span><div><image src="/resources/images/common/tooltip_bottom.gif" /></div></div>'),x.dom.query(a.tooltip).find("span")[0].innerHTML=a.message.replace(/\n/g,"<br />")):"undefined"!=typeof a.message?(a.tooltip=this.element[0].id+"$tooltip",0===x.dom.query(a.tooltip).size()&&this.element.after('<div id="'+a.tooltip+'" class="ajax-tooltip" style="display:none;" ><span>'+a.message.replace(/\n/g,"<br />")+'</span><div><image src="/resources/images/common/tooltip_bottom.gif" /></div></div>'),x.dom.query(a.tooltip).find("span")[0].innerHTML=a.message.replace(/\n/g,"<br />")):(a.tooltip=this.element[0].id+"$tooltip",0===x.dom.query(a.tooltip).size()&&this.element.after('<div id="'+a.tooltip+'" class="ajax-tooltip" style="display:none;" ><span></span><div><image src="/resources/images/common/tooltip_bottom.gif" /></div></div>'))),this.tooltip=x.dom.query(a.tooltip),this.name="undefined"==typeof a.name?this.element[0].id+"$"+this.tooltip[0].id+"$object":a.name,"undefined"!=typeof window[this.name]&&(window[this.name].unregisterEvents(),window[this.name]=void 0),this.options=a,this.tooltip.css({fontSize:this.options.fontSize,zIndex:this.options.zIndex,display:"none"}),this.options.corner&&x.corners.round(this.tooltip),this.element.css("cursor","default"),this.element.attr("tooltipName",this.name),this.element.attr("tooltipElementName",this.tooltip[0].id),this.registerEvents()},registerEvents:function(){1===this.following&&this.element.bind("mousemove",this.follow),this.element.bind("mouseover",this.show),this.element.bind("mouseout",this.hide)},unregisterEvents:function(){this.element.unbind("mousemove"),this.element.unbind("mouseover"),this.element.unbind("mouseout")},getPosition:function(a){if(1===this.following){var b=x.getEventPositionX(a),c=x.getEventPositionY(a),d=x.page.getElementRange(this.tooltip[0]),e=d.width,f=d.height;return e+b>=x.page.getViewWidth()-this.options.deltaX?(b-=e,b-=this.options.deltaX):b+=this.options.deltaX,f+c>=x.page.getViewHeight()-this.options.deltaY?(c-=f,c-=this.options.deltaY):c+=this.options.deltaY,{x:b,y:c}}var g=x.page.getElementLeft(this.element[0]),h=x.page.getElementTop(this.element[0])-x.page.getElementRange(this.tooltip[0]).height;return{x:g,y:h}},setPosition:function(a,b){this.tooltip.css({position:"absolute",top:b+"px",left:a+"px",zIndex:this.options.zIndex})},follow:function(a){var b=window[$(this).attr("tooltipName")],c=b.getPosition(a);b.setPosition(c.x,c.y)},show:function(a){var b=window[$(this).attr("tooltipName")],c=b.getPosition(a);b.setPosition(c.x,c.y),b.options.defaultCss&&b.tooltip.css({zIndex:b.options.zIndex}),b.tooltip.css({display:"",opacity:.1}),b.tooltip.fadeTo(1e3*b.options.maxDuration,b.options.maxOpacity,function(){b.tooltip.css({display:""})})},hide:function(){var a=window[$(this).attr("tooltipName")];a.tooltip.css({display:"none"}),a.tooltip.css({display:"",opacity:a.options.maxOpacity}),a.tooltip.fadeOut(1e3*a.options.maxDuration,function(){a.tooltip.css({display:"none"})})}};return b.create(),window[b.name]=b,b},newWarnTooltip:function(a){x.dom.query(a.element+"$tooltip").size()>0&&(x.dom.query(a.element+"$tooltip").remove(),"undefined"!=typeof window[a.element+"$"+a.element+"$tooltip$object"]&&(window[a.element+"$"+a.element+"$tooltip$object"].unregisterEvents(),window[a.element+"$"+a.element+"$tooltip$object"]=void 0));var b=x.ext(x.tooltip.newTooltip(a),{changeEvents:function(){this.element.unbind("mousemove"),this.element.unbind("mouseover"),this.element.unbind("mouseout"),this.registerEvents()},registerEvents:function(){var a=this;$(document.body).bind("scroll",function(b){var c=a.getPosition(b);a.setPosition(c.x,c.y)}),this.element.bind("blur",function(){x.customForm.checkDataInput(this,1)})},unregisterEvents:function(){var a=this;$(document.body).unbind("scroll",function(b){var c=a.getPosition(b);a.setPosition(c.x,c.y)}),this.element.unbind("blur")},warn:function(){var a=this,b={x:x.page.getElementLeft(this.element[0]),y:x.page.getElementTop(this.element[0])-x.page.getElementRange(this.tooltip[0]).height};a.setPosition(b.x,b.y),a.tooltip.css({display:"",opacity:.1}),a.tooltip.fadeTo(1e3*a.options.maxDuration,a.options.maxOpacity,function(){a.tooltip.css({display:""})})}});return b.changeEvents(),0===a.hide&&b.warn(),b}},x.ui.windows={newWindow:function(a,b){var c={name:a,options:b,open:function(){document.getElementById(a).style.display=""},close:function(){document.getElementById(a).style.display="none"},create:function(){var a="",b=this.options;return a='<div id="'+this.name+'" style="',a+="position: fixed; display:none;",a+="z-index: "+b.zIndex+";",a+="border: "+b.border+";",a+="width: "+b.width+";",a+="height: "+b.height+";",a+="top: "+b.top+";",a+="right:"+b.right+";",a+="bottom: "+b.bottom+";",a+="left: "+b.left+";",a+='" >'+b.content+"</div>"},destroy:function(){$(document.getElementById(a)).remove()},bindOptions:function(a){this.options=x.ext({zIndex:999,height:"100px",width:"100px",top:"auto",right:"auto",bottom:"auto",left:"auto"},a||{})},load:function(a){this.bindOptions(a),x.isUndefined(a.create)||(this.create=a.create),$(document.body).append(this.create()),this.options.bindingFeature&&x.dom.features.bind()}};return c},getWindow:function(a,b){var a=x.getFriendlyName(location.pathname+"-window-"+a),c=x.ui.windows.newWindow(a,b);return c.load(b),window[a]=c,c},getDialog:function(a,b,c,d){if("undefined"==typeof d&&(d="resizable=1,directories=0,location=0,menubar=1,scrollbars=1,status=0,titlebar=0,toolbar=0"),"undefined"==typeof b){d="width="+screen.availWidth+","+d;var e=Math.round((screen.availWidth-b)/2);d="left="+e+","+d}else{d="width="+b+","+d;var e=Math.round((screen.availWidth-b)/2);d="left="+e+","+d}if("undefined"==typeof c){d="height="+screen.availHeight+","+d;var f=Math.round((screen.availHeight-c)/2);d="top="+f+","+d}else{d="height="+c+","+d;var f=Math.round((screen.availHeight-c)/2);d="top="+f+","+d}return window.open(a,"",d)},getModalDialog:function(a,b,c,d){if("undefined"==typeof d&&(d="toolbar=no; location=no; directories=no; status=no; menubar=no; center=yes; help=0; resizable=yes; status=0;"),"undefined"==typeof b){var e=Math.round((screen.availWidth-b)/2);d="dialogWidth="+b+"px,left="+e+","+d}else{d="dialogWidth="+b+"px,"+d;var e=Math.round((screen.availWidth-b)/2);d="left="+e+","+d}if("undefined"==typeof c){var f=Math.round((screen.availHeight-c)/2);d="dialogHeight="+c+"px,top="+f+","+d}else{d="dialogHeight="+c+"px,"+d;var f=Math.round((screen.availHeight-c)/2);d="top="+f+","+d}return window.showModalDialog(a,window,d)}},x.ui.wizards={newWizard:function(a,b){var c=x.ext(x.ui.windows.newWindow(a,b),{maskWrapper:null,open:function(){this.maskWrapper.open()},close:function(){this.maskWrapper.close()},save:function(a){var b=this.save_callback(a);0===b&&this.close()},save_callback:function(){return 0},cancel:function(){"undefined"!=typeof this.cancel_callback&&this.cancel_callback(),this.close()},create:function(){return x.debug.error("必须重写向导对象的 create() 方法。"),"必须重写向导对象的 create() 方法。"},load:function(a){this.maskWrapper=a.maskWrapper||x.ui.mask.newMaskWrapper(this.name+"-maskWrapper"),"undefined"!=typeof a.bindOptions&&(this.bindOptions=a.bindOptions),this.bindOptions(a),"undefined"!=typeof a.create&&(this.create=a.create),this.create_callback=a.create_callback||x.noop,this.save_callback=a.save_callback||x.noop,this.cancel_callback=a.cancel_callback||x.noop,x.ui.mask.getWindow({content:this.create(),callback:this.create_callback},this.maskWrapper),x.dom.features.bind()}});return c},getWizard:function(a,b){var a=x.getFriendlyName(location.pathname+"-wizard-"+a),c=x.ui.wizards.newWizard(a,b);return c.load(b),window[a]=c,c},alert:function(a){a.title="undefined"==typeof a.title?"提示框":a.title,a.width="undefined"==typeof a.width?"360px":a.width,x.ui.wizards.getWizard("alert",{bindOptions:function(){this.maskWrapper.autoHide=0},save_callback:function(){return 0},create:function(){var b="";return b+='<div id="'+this.name+'" class="winodw-wizard-wrapper" style="width:'+a.width+'; height:auto;" >',b+='<div class="winodw-wizard-toolbar" >',b+='<div class="winodw-wizard-toolbar-close">',b+='<a href="javascript:'+this.name+'.cancel();" class="button-text" >关闭</a>',b+="</div>",b+='<div class="float-left">',b+='<div class="winodw-wizard-toolbar-item" style="width:200px;" ><span>'+a.title+"</span></div>",b+='<div class="clear"></div>',b+="</div>",b+='<div class="clear"></div>',b+="</div>",b+='<div style="padding:10px;" >'+a.message+"</div>",b+='<div class="winodw-wizard-result-container" >',b+='<div class="winodw-wizard-result-item" style="float:right;" ><div class="button-2font-wrapper" style="margin:0 10px 3px 0px;" ><a href="javascript:'+this.name+'.save();" class="button-text" >确定</a></div></div>',b+='<div class="clear"></div>',b+="</div>",b+='<div class="clear"></div>',b+="</div>"}}),x.stopEventPropagation()},confirm:function(a){a.title="undefined"==typeof a.title?"确认框":a.title,a.width="undefined"==typeof a.width?"360px":a.width,x.ui.wizards.getWizard("confirm",{bindOptions:function(){this.maskWrapper.autoHide=0},save_callback:function(){return a.callback&&a.callback(),0},create:function(){var b="";return b+='<div id="'+this.name+'" class="winodw-wizard-wrapper" style="width:'+a.width+'; height:auto;" >',b+='<div class="winodw-wizard-toolbar" >',b+='<div class="winodw-wizard-toolbar-close">',b+='<a href="javascript:'+this.name+'.cancel();" class="button-text" >关闭</a>',b+="</div>",b+='<div class="float-left">',b+='<div class="winodw-wizard-toolbar-item" style="width:200px;" ><span>'+a.title+"</span></div>",b+='<div class="clear"></div>',b+="</div>",b+='<div class="clear"></div>',b+="</div>",b+='<div style="padding:10px;" >'+a.message+"</div>",b+='<div class="winodw-wizard-result-container" >',b+='<div class="winodw-wizard-result-item" style="float:right;" ><div class="button-2font-wrapper" style="margin:0 10px 3px 0px;" ><a href="javascript:'+this.name+'.cancel();" class="button-text" >取消</a></div></div>',b+='<div class="winodw-wizard-result-item" style="float:right;" ><div class="button-2font-wrapper" style="margin:0 10px 3px 0px;" ><a href="javascript:'+this.name+'.save();" class="button-text" >确定</a></div></div>',b+='<div class="clear"></div>',b+="</div>",b+='<div class="clear"></div>',b+="</div>"}})},prompt:function(a){a.title="undefined"==typeof a.title?"提示输入框":a.title,a.message="undefined"==typeof a.message?"请填写相关内容":a.message,a.defaultValue="undefined"==typeof a.defaultValue?"":a.defaultValue,a.width="undefined"==typeof a.width?"360px":a.width,x.ui.wizards.getWizard("confirm",{bindOptions:function(){this.maskWrapper.autoHide=0},save_callback:function(){return a.callback&&a.callback(x.dom.query(this.name+"$input").val()),0},create:function(){var b="";return b+='<div id="'+this.name+'" class="winodw-wizard-wrapper" style="width:'+a.width+'; height:auto;" >',b+='<div class="winodw-wizard-toolbar" >',b+='<div class="winodw-wizard-toolbar-close">',b+='<a href="javascript:'+this.name+'.cancel();" class="button-text" >关闭</a>',b+="</div>",b+='<div class="float-left">',b+='<div class="winodw-wizard-toolbar-item" style="width:200px;" ><span>'+a.title+"</span></div>",b+='<div class="clear"></div>',b+="</div>",b+='<div class="clear"></div>',b+="</div>",b+='<div style="padding:10px;" >',b+=a.message+"<br />",b+='<input id="'+this.name+'$input" name="'+this.name+'$input" type="text" value="'+a.defaultValue+'" class="input-normal" style="width:200px" />',b+="</div>",b+='<div class="winodw-wizard-result-container" >',b+='<div class="winodw-wizard-result-item" style="float:right;" ><div class="button-2font-wrapper" style="margin:0 10px 3px 0px;" ><a href="javascript:'+this.name+'.save();" class="button-text" >确定</a></div></div>',b+='<div class="clear"></div>',b+="</div>",b+='<div class="clear"></div>',b+="</div>"}})}},x.ui.dialogs={defaults:{id:"",title:"标题",content:"text:内容",width:"280",height:"140",titleClass:"box-title",closeID:"",triggerID:"",boxBdOpacity:"1",boxWrapBdColor:"#cccccc",windowBgColor:"#000000",windowBgOpacity:"0.5",time:"",drag:"",dragBoxOpacity:"1",showTitle:!0,showBoxbg:!0,showbg:!1,offsets:"",button:"",callback:function(){},fns:function(){}},list:[],newDialog:function(a){a=x.ext({},x.ui.dialogs.defaults,a||{});var b={id:null,container:null,show:function(){var b=1!=a.showTitle?1:33,c=1!=a.showTitle?0:10;$boxDialogHeight=""!=a.button?45:0,$boxDialogBorder="0"==$boxDialogHeight?"0":"1";var d=parseInt(a.width)>1e3?1e3:parseInt(a.width),e=parseInt(a.height)>550?550:parseInt(a.height),f='<div id="'+a.id+'" class="x-ui-dialogs">';f+='<div class="boxWrap">',f+='<div class="box-title"><h3></h3><span class="box-close-btn">关闭</span></div>',f+='<div class="boxContent"></div>',f+='<div class="box-dialog"></div>',f+="</div>",f+='<div class="box-bd"></div>',f+='<iframe src="about:blank" style="position:absolute;left:0;top:0;filter:alpha(opacity=0);opacity:0;scrolling=no;z-index:10714"></iframe>',f+="</div>",$(f).appendTo("body");var g=$("#"+a.id);g.css({position:"relative",width:d+12+"px",height:e+b+c+$boxDialogHeight+1+"px",zIndex:"891208"});
var h=$("iframe",g);h.css({width:d+12+"px",height:e+b+c+$boxDialogHeight+1+"px"});var i=$(".boxWrap",g);i.css({position:"relative",top:"5px",margin:"0 auto",width:d+2+"px",height:e+b+$boxDialogHeight+1+"px",overflow:"hidden",zIndex:"20590"});var j=$(".boxContent",g);j.css({position:"relative",width:d+"px",height:e+"px",padding:"0",borderWidth:"1px",borderStyle:"solid",borderColor:a.boxWrapBdColor,overflow:"auto",backgroundColor:"#fff"});var k=$(".box-dialog",g);k.css({width:d+"px",height:$boxDialogHeight+"px",borderWidth:$boxDialogBorder+"px",borderStyle:"solid",borderColor:a.boxWrapBdColor,borderTop:"none",textAlign:"right"});var l=$(".box-bd",g);l.css({position:"absolute",width:d+12+"px",height:e+b+c+$boxDialogHeight+1+"px",left:"0",top:"0",opacity:a.boxBdOpacity,background:a.boxBdColor,zIndex:"10715"});var m=$(".boxTitle>h3",g);m.html(a.title),m.parent().css({position:"relative",width:d+"px",borderColor:a.boxWrapBdColor}),""!=a.titleClass&&(m.parent().addClass(a.titleClass),m.parent().find("span").hover(function(){$(this).addClass("hover")},function(){$(this).removeClass("hover")})),1!=a.showTitle&&$(".boxTitle",g).remove(),1!=a.showBoxbg&&($(".box-bd",g).remove(),g.css({width:d+2+"px",height:e+b+$boxDialogHeight+1+"px"}),i.css({left:"0",top:"0"}));var n=-1;this.getDomPosition();var o=a.offsets,p=$('<div id="'+a.id+'parent"></div>'),q=x.browser.ie6?""!=a.triggerID?0:document.documentElement.scrollTop:"";if(""==a.offsets||a.offsets.constructor==String)switch(o){case"left-top":o={left:"0px",top:"0px"+q},n=0;break;case"left-bottom":o={left:"0px",bottom:"0px"};break;case"right-top":o={right:"0px",top:"0px"+q},n=0;break;case"right-bottom":o={right:"0px",bottom:"0px"};break;case"middle-top":o={left:"50%",marginLeft:-parseInt(g.width()/2)+"px",top:"0px"+q},n=0;break;case"middle-bottom":o={left:"50%",marginLeft:-parseInt(g.width()/2)+"px",bottom:"0px"};break;case"left-middle":o={left:"0px",top:"50%"+q,marginTop:-parseInt(g.height()/2)+"px"+q},n=$getPageSize[1]/2-g.height()/2;break;case"right-middle":o={right:"0px",top:"50%"+q,marginTop:-parseInt(g.height()/2)+"px"+q},n=$getPageSize[1]/2-g.height()/2;break;default:o={left:"50%",marginLeft:-parseInt(g.width()/2)+"px",top:"50%"+q,marginTop:-parseInt(g.height()/2)+"px"+q},n=$getPageSize[1]/2-g.height()/2}else{var r=o.top;o.top=o.top+q,"undefined"!=typeof r&&(r=r.replace("px",""),n=r)}if(""!=a.triggerID){var s=$("#"+a.triggerID).offset(),t=($("#"+a.triggerID).outerWidth(),$("#"+a.triggerID).outerHeight(),s.left),u=s.top,v=o.left,w=o.top;("undefined"!=typeof v||"undefined"!=typeof w)&&(v=parseInt(v.replace("px","")),w=parseInt(w.replace("px","")));var y=v>=0?parseInt(v)+t:parseInt(v)+t-$getPageSize[2],z=w>=0?parseInt(w)+u:parseInt(w)+u-$getPageSize[3];o={left:y+"px",top:z+"px"}}x.browser.ie6?""==a.triggerID?(n>=0?(this.addStyle(".ui_fixed_"+a.id+"{width:100%;height:100%;position:absolute;left:expression(documentElement.scrollLeft+documentElement.clientWidth-this.offsetWidth);top:expression(documentElement.scrollTop+"+n+")}"),p=$('<div class="'+a.id+'IE6FIXED" id="'+a.id+'parent"></div>'),g.appendTo(p),$("body").append(p),$("."+a.id+"IE6FIXED").css(o).css({position:"absolute",width:d+12+"px",height:e+b+c+$boxDialogHeight+1+"px",zIndex:"891208"}).addClass("ui_fixed_"+a.id)):(this.addStyle(".ui_fixed2_"+a.id+"{width:100%;height:100%;position:absolute;left:expression(documentElement.scrollLeft+documentElement.clientWidth-this.offsetWidth);top:expression(documentElement.scrollTop+documentElement.clientHeight-this.offsetHeight)}"),p=$('<div class="'+a.id+'IE6FIXED"  id="'+a.id+'parent"></div>'),g.appendTo(p),$("body").append(p),$("."+a.id+"IE6FIXED").css(o).css({position:"absolute",width:d+12+"px",height:e+b+c+$boxDialogHeight+1+"px",zIndex:"891208"}).addClass("ui_fixed2_"+a.id)),$("body").css("background-attachment","fixed").css("background-image","url(n1othing.txt)")):p.css({position:"absolute",left:y+"px",top:z+"px",width:d+12+"px",height:e+b+c+$boxDialogHeight+1+"px",zIndex:"891208"}):(p.css(o).css({position:"fixed",width:d+12+"px",height:e+b+c+$boxDialogHeight+1+"px",zIndex:"891208"}),""!=a.triggerID&&p.css({position:"absolute"}),$("body").append(p),g.appendTo(p))},setContent:function(){var b=$("#"+a.id),c=parseInt(a.width)>1e3?1e3:parseInt(a.width),d=parseInt(a.height)>550?550:parseInt(a.height),e=$(".boxContent",b);switch($contentType=a.content.substring(0,a.content.indexOf(":")),$content=a.content.substring(a.content.indexOf(":")+1,a.content.length),$.ajaxSetup({global:!1}),$contentType){case"text":e.html($content);break;case"id":$("#"+$content).children().appendTo(e);break;case"img":$.ajax({beforeSend:function(){e.html("<p class='boxLoading'>loading...</p>")},error:function(){e.html("<p class='boxError'>加载数据出错...</p>")},success:function(){e.html("<img src="+$content+" alt='' />")}});break;case"swf":$.ajax({beforeSend:function(){e.html("<p class='boxLoading'>loading...</p>")},error:function(){e.html("<p class='boxError'>加载数据出错...</p>")},success:function(){e.html("<div id='"+a.id+'swf\'><h1>Alternative content</h1><p><a href="http://www.adobe.com/go/getflashplayer"><img src="http://www.adobe.com/images/shared/download_buttons/get_flash_player.gif" alt="Get Adobe Flash player" /></a></p></div><script type="text/javascript" src="swfobject.js" ></script><script type="text/javascript">swfobject.embedSWF(\''+$content+"', '"+a.id+"swf', '"+c+"', '"+d+"', '9.0.0', 'expressInstall.swf');</script>"),$("#"+a.id+"swf").css({position:"absolute",left:"0",top:"0",textAlign:"center"})}});break;case"url":var f=$content.split("?");$.ajax({beforeSend:function(){e.html("<p class='boxLoading'>loading...</p>")},type:f[0],url:f[1],data:f[2],error:function(){e.html("<p class='boxError'><em></em><span>加载数据出错...</span></p>")},success:function(a){e.html(a)}});break;case"iframe":e.css({overflowY:"hidden"}),$.ajax({beforeSend:function(){e.html("<p class='boxLoading'>loading...</p>")},error:function(){e.html("<p class='boxError'>加载数据出错...</p>")},success:function(){e.html('<iframe src="'+$content+'" width="100%" height="'+parseInt(a.height)+'px" scrolling="auto" frameborder="0" marginheight="0" marginwidth="0"></iframe>')}})}},ask:function(){var b=$("#"+a.id);if($boxDialog=$(".box-dialog",b),""!=a.button){var c={},d=[];if(a.button instanceof Array)for(var e=0;e<a.button.length;e++)c[a.button[e]]=a.button[e],d.push(a.button[e]);else for(var f in a.button)c[a.button[f]]=f,d.push(a.button[f]);$boxDialog.html($.map(d,function(a){return"<input class='dialogBtn' type='button'  value='"+a+"' />"}).join(" ")),$(".dialogBtn",$boxDialog).hover(function(){$(this).addClass("hover")},function(){$(this).removeClass("hover")}).click(function(){var b=this;""!=a.callback&&$.isFunction(a.callback)&&a.callback(c[b.value]),this.remove()})}},getDomPosition:function(){var b=$("#"+a.id),c=document.documentElement.clientWidth,d=document.documentElement.clientHeight,e=b.outerWidth(),f=b.outerHeight(),g=b.offset(),h=g.left,i=g.top;$getPageSize=new Array,$getPageSize.push(c,d,e,f,h,i)},setZIndex:function(){x.ui.dialogs.list.push(document.getElementById(a.id+"parent"));var b=x.query("#"+this.id+"parent");x.event.add(b,"click",function(){for(var a=0;a<x.ui.dialogs.list.length;a++)x.ui.dialogs.list[a].style.zIndex=870618;b.style.zIndex=891208})},addStyle:function(a){var b=this.style;b||(b=this.style=document.createElement("style"),b.setAttribute("type","text/css"),document.getElementsByTagName("head")[0].appendChild(b)),b.styleSheet&&(b.styleSheet.cssText+=a)||b.appendChild(document.createTextNode(a))},drag:function(){var b=0,c=0,d=!1,e=$("#"+a.id);$Handle=$("."+a.drag,e),$Handle.mouseover(function(){""!=a.triggerID?$(this).css("cursor","default"):$(this).css("cursor","move")}),$Handle.mousedown(function(f){d=""!=a.triggerID?!1:!0,a.dragBoxOpacity&&("1"!=a.boxBdOpacity?(e.children("div").css("opacity",a.dragBoxOpacity),e.children("div.box-bd").css("opacity",a.box-bdOpacity)):e.children("div").css("opacity",a.dragBoxOpacity)),f=window.event?window.event:f;var g=document.getElementById(a.id);b=f.clientX-g.offsetLeft,c=f.clientY-g.offsetTop,$(document).mousemove(function(a){if(d){a=window.event?window.event:a,window.getSelection?window.getSelection().removeAllRanges():document.selection.empty();var e=a.clientX-b,f=a.clientY-c;$(g).css({left:e,top:f})}}),$(document).mouseup(function(){d=!1,a.dragBoxOpacity&&("1"!=a.boxBdOpacity?(e.children("div").css("opacity","1"),e.children("div.box-bd").css("opacity",a.box-bdOpacity)):e.children("div").css("opacity","1"))})})},remove:function(){var a=$("#"+this.id),b=$("#x-ui-dialogs-window-bg");if(null!=a||null!=b){var c=$(".boxContent",a);$contentType=this.content.substring(0,this.content.indexOf(":")),$content=this.content.substring(this.content.indexOf(":")+1,this.content.length),"id"==$contentType?(c.children().appendTo($("#"+$content)),a.parent().removeAttr("style").remove(),b.animate({opacity:"0"},500,function(){$(this).remove()}),$("body").css("background","#fff")):(a.parent().removeAttr("style").remove(),b.animate({opacity:"0"},500,function(){$(this).remove()}),$("body").css("background","#fff"))}},keydown:function(){document.onkeydown=function(a){a=a||event,27==a.keyCode&&this.remove()}},create:function(a){var b=this;if(this.options=a,this.id=""==this.options.id?this.options.id=x.randomText.create(10):this.options.id,this.content=a.content,null!=x.query("#"+this.id))return x.msg("创建弹出层失败！窗口“"+a.id+"”已存在！"),!1;this.show(),this.setContent();$("#"+this.id);this.box=x.query("#"+this.id),x.dom.on(x.query(".box-close-btn",this.box),"click",function(){b.remove()}),x.css.style(this.box,{zIndex:"870618"}),""!=a.closeID&&x.dom.on(x.query("#"+a.closeID,this.box),"click",function(){b.remove()}),""!=a.time&&setTimeout(function(){b.remove()},a.time),""!=a.showbg&&1==a.showbg&&x.dom.append(document.body,'<div id="x-ui-dialogs-window-bg" style="position:absolute;background:'+a.windowBgColor+';filter:alpha(opacity=0);opacity:0;width:100%;left:0;top:0;z-index:870618"><iframe src="about:blank" style="width=100%;height:'+$(document).height()+'px;filter:alpha(opacity=0);opacity:0;scrolling=no;z-index:870610"></iframe></div>'),""!=a.drag&&this.drag(),""!=a.fns&&$.isFunction(a.fns)&&a.fns.call(this),""!=a.button&&this.ask(),this.keydown(),this.setZIndex(),1!=a.showbg&&x.css.add(this.container,"shadow")}};return b.create(a),b}},x.ui.util={setFlash:function(a,b,c,d,e){var f="",g=x.query(a);e=x.isUndefined(e,""),f+='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=11" width="'+c+'" height="'+d+'" title="'+e+'"> <param name="movie" value="'+b+'" /><param name="quality" value="high" /><embed src="'+b+'" quality="high" pluginspage="http://www.macromedia.com/go/getflashplayer" type="application/x-shockwave-flash" width="'+c+'" height="'+d+'"></embed></object>',g.innerHTML=f},setQQ:function(a,b,c){var d="",e=x.query(a);""!==b&&"0"!==b&&(d+='<a target="_blank" href="tencent://message/?uin=',d+=b+"&site="+(c?c:"localhost"),d+='&menu=yes" alt="QQ:'+b+'" >'+b+"</a>"),e.innerHTML=d}};