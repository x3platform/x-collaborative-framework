<?xml version="1.0" encoding="utf-8" ?>
<sqlMap namespace="X3Platform.Sessions.DAL.IBatis.AccountCacheProvider" xmlns="http://ibatis.apache.org/mapping" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" >
    <alias>
        <typeAlias alias="AccountCacheInfo" type="X3Platform.Sessions.AccountCacheInfo,X3Platform.Abstractions" />
    </alias>
    <resultMaps>
        <resultMap id="proc_AccountCache_FindOne_Result" class="AccountCacheInfo">
            <result property="AccountIdentity" column="AccountIdentity" />
            <result property="AppKey" column="AppKey" />
            <result property="AccountCacheValue" column="AccountCacheValue" />
            <result property="AccountObject" column="AccountObject" />
            <result property="AccountObjectType" column="AccountObjectType" />
            <result property="IP" column="IP" />
            <result property="BeginDate" column="BeginDate" />
            <result property="EndDate" column="EndDate" />
            <result property="UpdateDate" column="UpdateDate" />
        </resultMap>
        <resultMap id="proc_AccountCache_FindAll_Result" class="AccountCacheInfo">
            <result property="AccountIdentity" column="AccountIdentity" />
            <result property="AppKey" column="AppKey" />
            <result property="AccountCacheValue" column="AccountCacheValue" />
            <result property="AccountObject" column="AccountObject" />
            <result property="AccountObjectType" column="AccountObjectType" />
            <result property="IP" column="IP" />
            <result property="BeginDate" column="BeginDate" />
            <result property="EndDate" column="EndDate" />
            <result property="UpdateDate" column="UpdateDate" />
        </resultMap>
    </resultMaps>
    <statements>
        <insert id="proc_AccountCache_Insert" parameterClass="AccountCacheInfo">
            INSERT INTO tb_AccountCache
            (
                AccountIdentity,
                AppKey,
                AccountCacheValue,
                AccountObject,
                AccountObjectType,
                IP,
                BeginDate,
                EndDate,
                UpdateDate
            )
            VALUES
            (
                #AccountIdentity#,
                #AppKey#,
                #AccountCacheValue#,
                #AccountObject#,
                #AccountObjectType#,
                #IP#,
                #BeginDate#,
                #EndDate#,
                CURRENT_TIMESTAMP
            )
        </insert>

        <update id="proc_AccountCache_Update" parameterClass="AccountCacheInfo">
            UPDATE tb_AccountCache SET

                AccountObject = #AccountObject#,
                AccountObjectType = #AccountObjectType#,
                EndDate = #EndDate#,
                UpdateDate = CURRENT_TIMESTAMP

            WHERE AccountIdentity = #AccountIdentity#
        </update>

        <delete id="proc_AccountCache_Delete" >
            DELETE FROM tb_AccountCache WHERE $WhereClause$
        </delete>

        <select id="proc_AccountCache_FindByAccountIdentity" resultMap="proc_AccountCache_FindOne_Result" >
            SELECT * FROM tb_AccountCache WHERE AccountIdentity = #AccountIdentity#
        </select>

        <select id="proc_AccountCache_FindByAccountCacheValue" resultMap="proc_AccountCache_FindOne_Result" >
            SELECT * FROM tb_AccountCache WHERE AccountCacheValue = #AccountCacheValue#
        </select>

        <select id="proc_AccountCache_Dump" resultMap="proc_AccountCache_FindAll_Result" >
            SELECT * FROM tb_AccountCache
        </select>

        <select id="proc_AccountCache_IsExist" >
            SELECT COUNT(0) AS "Count" FROM tb_AccountCache WHERE $WhereClause$
        </select>
    </statements>
</sqlMap>
